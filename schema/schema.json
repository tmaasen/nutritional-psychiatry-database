{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "NutritionalPsychiatryFood",
  "description": "Schema for food data in the Nutritional Psychiatry Dataset",
  "type": "object",
  "required": ["food_id", "name", "category", "standard_nutrients"],
  "properties": {
    "food_id": {
      "type": "string",
      "description": "Unique identifier, derived from USDA FDC ID when available"
    },
    "name": {
      "type": "string",
      "description": "Common name of the food item"
    },
    "description": {
      "type": "string",
      "description": "Detailed description of the food item"
    },
    "category": {
      "type": "string",
      "description": "Food group/category (e.g., Fruits, Vegetables, Protein Foods)"
    },
    "serving_info": {
      "type": "object",
      "properties": {
        "serving_size": {
          "type": "number",
          "description": "Standard serving size"
        },
        "serving_unit": {
          "type": "string",
          "description": "Unit of measurement for serving"
        },
        "household_serving": {
          "type": "string",
          "description": "Common household measure equivalent"
        }
      }
    },
    "standard_nutrients": {
      "type": "object",
      "description": "Standard nutritional composition per 100g unless specified otherwise",
      "properties": {
        "calories": {
          "type": "number",
          "description": "Energy content in kcal"
        },
        "protein_g": {
          "type": "number",
          "description": "Protein content in grams"
        },
        "carbohydrates_g": {
          "type": "number",
          "description": "Carbohydrate content in grams"
        },
        "fat_g": {
          "type": "number",
          "description": "Fat content in grams"
        },
        "fiber_g": {
          "type": "number",
          "description": "Dietary fiber in grams"
        },
        "sugars_g": {
          "type": "number",
          "description": "Total sugars in grams"
        },
        "sugars_added_g": {
          "type": "number",
          "description": "Added sugars in grams"
        },
        "calcium_mg": {
          "type": "number",
          "description": "Calcium in milligrams"
        },
        "iron_mg": {
          "type": "number",
          "description": "Iron in milligrams"
        },
        "magnesium_mg": {
          "type": "number",
          "description": "Magnesium in milligrams"
        },
        "phosphorus_mg": {
          "type": "number",
          "description": "Phosphorus in milligrams"
        },
        "potassium_mg": {
          "type": "number",
          "description": "Potassium in milligrams"
        },
        "sodium_mg": {
          "type": "number",
          "description": "Sodium in milligrams"
        },
        "zinc_mg": {
          "type": "number",
          "description": "Zinc in milligrams"
        },
        "copper_mg": {
          "type": "number",
          "description": "Copper in milligrams"
        },
        "manganese_mg": {
          "type": "number",
          "description": "Manganese in milligrams"
        },
        "selenium_mcg": {
          "type": "number",
          "description": "Selenium in micrograms"
        },
        "vitamin_c_mg": {
          "type": "number",
          "description": "Vitamin C in milligrams"
        },
        "vitamin_a_iu": {
          "type": "number",
          "description": "Vitamin A in International Units"
        }
      }
    },
    "brain_nutrients": {
      "type": "object",
      "description": "Nutrients specifically relevant to brain function per 100g",
      "properties": {
        "tryptophan_mg": {
          "type": "number",
          "description": "Tryptophan (precursor to serotonin) in milligrams"
        },
        "tyrosine_mg": {
          "type": "number",
          "description": "Tyrosine (precursor to dopamine) in milligrams"
        },
        "vitamin_b6_mg": {
          "type": "number",
          "description": "Vitamin B6 in milligrams"
        },
        "folate_mcg": {
          "type": "number",
          "description": "Folate (B9) in micrograms"
        },
        "vitamin_b12_mcg": {
          "type": "number",
          "description": "Vitamin B12 in micrograms"
        },
        "vitamin_d_mcg": {
          "type": "number",
          "description": "Vitamin D in micrograms"
        },
        "magnesium_mg": {
          "type": "number",
          "description": "Magnesium in milligrams"
        },
        "zinc_mg": {
          "type": "number",
          "description": "Zinc in milligrams"
        },
        "iron_mg": {
          "type": "number",
          "description": "Iron in milligrams"
        },
        "selenium_mcg": {
          "type": "number",
          "description": "Selenium in micrograms"
        },
        "choline_mg": {
          "type": "number",
          "description": "Choline in milligrams"
        },
        "omega3": {
          "type": "object",
          "description": "Omega-3 fatty acids breakdown",
          "properties": {
            "total_g": {
              "type": "number",
              "description": "Total omega-3 fatty acids in grams"
            },
            "epa_mg": {
              "type": "number",
              "description": "Eicosapentaenoic acid in milligrams"
            },
            "dha_mg": {
              "type": "number",
              "description": "Docosahexaenoic acid in milligrams"
            },
            "ala_mg": {
              "type": "number",
              "description": "Alpha-linolenic acid in milligrams"
            },
            "confidence": {
              "type": "number",
              "description": "Confidence rating for omega-3 data (1-10)",
              "minimum": 0,
              "maximum": 10
            }
          }
        }
      }
    },
    "bioactive_compounds": {
      "type": "object",
      "description": "Bioactive compounds with brain health effects per 100g",
      "properties": {
        "polyphenols_mg": {
          "type": "number",
          "description": "Total polyphenols in milligrams"
        },
        "flavonoids_mg": {
          "type": "number",
          "description": "Total flavonoids in milligrams"
        },
        "anthocyanins_mg": {
          "type": "number",
          "description": "Anthocyanins in milligrams"
        },
        "carotenoids_mg": {
          "type": "number",
          "description": "Carotenoids in milligrams"
        },
        "probiotics_cfu": {
          "type": "number",
          "description": "Probiotic content in colony-forming units"
        },
        "prebiotic_fiber_g": {
          "type": "number",
          "description": "Prebiotic fiber in grams"
        }
      }
    },
    "mental_health_impacts": {
      "type": "array",
      "description": "Evidence-based mental health impacts",
      "items": {
        "type": "object",
        "required": ["impact_type", "direction", "mechanism", "strength", "confidence"],
        "properties": {
          "impact_type": {
            "type": "string",
            "description": "Category of mental health impact",
            "enum": [
              "mood_elevation",
              "mood_depression",
              "anxiety_reduction",
              "anxiety_increase",
              "cognitive_enhancement",
              "cognitive_decline",
              "energy_increase",
              "energy_decrease",
              "stress_reduction",
              "sleep_improvement",
              "gut_health_improvement"
            ]
          },
          "direction": {
            "type": "string",
            "description": "Direction of effect",
            "enum": ["positive", "negative", "neutral", "mixed"]
          },
          "mechanism": {
            "type": "string",
            "description": "Biological mechanism of action"
          },
          "strength": {
            "type": "number",
            "description": "Strength of effect (1-10 scale)",
            "minimum": 1,
            "maximum": 10
          },
          "confidence": {
            "type": "number",
            "description": "Confidence in this relationship based on evidence (1-10 scale)",
            "minimum": 1,
            "maximum": 10
          },
          "time_to_effect": {
            "type": "string",
            "description": "Timeframe for impact (acute, cumulative, etc.)",
            "enum": ["acute", "cumulative", "both_acute_and_cumulative"]
          },
          "research_context": {
            "type": "string",
            "description": "Context about supporting research"
          },
          "research_support": {
            "type": "array",
            "description": "Citations supporting this impact",
            "items": {
              "type": "object",
              "properties": {
                "citation": {
                  "type": "string",
                  "description": "Full citation text"
                },
                "doi": {
                  "type": "string",
                  "description": "Digital Object Identifier when available"
                },
                "url": {
                  "type": "string",
                  "description": "URL to research when available"
                },
                "study_type": {
                  "type": "string",
                  "description": "Type of study (e.g., RCT, meta-analysis)"
                },
                "year": {
                  "type": "number",
                  "description": "Publication year"
                }
              }
            }
          },
          "notes": {
            "type": "string",
            "description": "Additional notes or caveats"
          }
        }
      }
    },
    "nutrient_interactions": {
      "type": "array",
      "description": "Interactions between nutrients affecting mental health",
      "items": {
        "type": "object",
        "required": ["interaction_id", "nutrients_involved", "interaction_type", "mechanism", "confidence"],
        "properties": {
          "interaction_id": {
            "type": "string",
            "description": "Unique identifier for this interaction"
          },
          "nutrients_involved": {
            "type": "array",
            "description": "List of nutrients involved in this interaction",
            "items": {
              "type": "string"
            }
          },
          "interaction_type": {
            "type": "string",
            "description": "Type of interaction",
            "enum": ["synergistic", "antagonistic", "required_cofactor", "protective", "inhibitory"]
          },
          "pathway": {
            "type": "string",
            "description": "Biochemical pathway affected"
          },
          "mechanism": {
            "type": "string",
            "description": "Detailed mechanism of action"
          },
          "mental_health_relevance": {
            "type": "string",
            "description": "How this interaction affects mental health"
          },
          "confidence": {
            "type": "number",
            "description": "Confidence in this interaction (1-10)",
            "minimum": 1,
            "maximum": 10
          },
          "research_support": {
            "type": "array",
            "description": "Supporting research",
            "items": {
              "type": "object",
              "properties": {
                "citation": {
                  "type": "string",
                  "description": "Citation information"
                },
                "study_type": {
                  "type": "string",
                  "description": "Type of study"
                }
              }
            }
          },
          "foods_demonstrating": {
            "type": "array",
            "description": "Foods that demonstrate this interaction",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "contextual_factors": {
      "type": "object",
      "description": "Contextual factors affecting nutrient impact",
      "properties": {
        "circadian_effects": {
          "type": "object",
          "description": "Effects related to time of consumption",
          "properties": {
            "description": {
              "type": "string"
            },
            "factors": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "factor": {
                    "type": "string"
                  },
                  "effects": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "relevant_to": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "confidence": {
                    "type": "number",
                    "minimum": 1,
                    "maximum": 10
                  },
                  "citations": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "food_combinations": {
          "type": "array",
          "description": "Effects of combining with other foods",
          "items": {
            "type": "object",
            "properties": {
              "combination": {
                "type": "string"
              },
              "effects": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "relevant_to": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "confidence": {
                "type": "number",
                "minimum": 1,
                "maximum": 10
              }
            }
          }
        },
        "preparation_effects": {
          "type": "array",
          "description": "Effects of food preparation methods",
          "items": {
            "type": "object",
            "properties": {
              "method": {
                "type": "string"
              },
              "effects": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "relevant_to": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "confidence": {
                "type": "number",
                "minimum": 1,
                "maximum": 10
              }
            }
          }
        }
      }
    },
    "population_variations": {
      "type": "array",
      "description": "Variations in response by different populations",
      "items": {
        "type": "object",
        "properties": {
          "population": {
            "type": "string",
            "description": "Population identifier"
          },
          "description": {
            "type": "string",
            "description": "Description of the population"
          },
          "variations": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "nutrient": {
                  "type": "string"
                },
                "effect": {
                  "type": "string"
                },
                "mechanism": {
                  "type": "string"
                },
                "impact_modifier": {
                  "type": "number",
                  "description": "Multiplier for effect strength"
                },
                "recommendations": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "confidence": {
                  "type": "number",
                  "minimum": 1,
                  "maximum": 10
                },
                "citations": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "dietary_patterns": {
      "type": "array",
      "description": "Whole dietary patterns this food contributes to",
      "items": {
        "type": "object",
        "properties": {
          "pattern_name": {
            "type": "string",
            "description": "Name of dietary pattern",
            "enum": ["mediterranean", "western", "dash", "mind", "vegetarian", "vegan", "ketogenic", "low_fodmap"]
          },
          "pattern_contribution": {
            "type": "string",
            "description": "How this food contributes to the pattern",
            "enum": ["key_component", "supportive", "occasional", "limited", "avoided"]
          },
          "mental_health_relevance": {
            "type": "string",
            "description": "How this food's role in the pattern affects mental health"
          }
        }
      }
    },
    "inflammatory_index": {
      "type": "object",
      "description": "Food's inflammatory potential",
      "properties": {
        "value": {
          "type": "number",
          "description": "Inflammatory index (-10 anti-inflammatory to +10 pro-inflammatory)"
        },
        "confidence": {
          "type": "number",
          "minimum": 1,
          "maximum": 10
        },
        "calculation_method": {
          "type": "string",
          "enum": ["dietary_inflammatory_index", "empirical_dietary_index", "expert_estimate"]
        },
        "citations": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "neural_targets": {
      "type": "array",
      "description": "Neural pathways affected by food components",
      "items": {
        "type": "object",
        "properties": {
          "pathway": {
            "type": "string",
            "description": "Neural pathway affected"
          },
          "effect": {
            "type": "string",
            "enum": ["upregulation", "downregulation", "modulation", "protection"]
          },
          "confidence": {
            "type": "number",
            "minimum": 1,
            "maximum": 10
          },
          "mechanisms": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "mental_health_relevance": {
            "type": "string"
          }
        }
      }
    },
    "data_quality": {
      "type": "object",
      "description": "Data quality metrics",
      "properties": {
        "completeness": {
          "type": "number",
          "description": "Fraction of fields with valid data (0-1)",
          "minimum": 0,
          "maximum": 1
        },
        "overall_confidence": {
          "type": "number",
          "description": "Overall confidence in data quality (1-10)",
          "minimum": 1,
          "maximum": 10
        },
        "brain_nutrients_source": {
          "type": "string",
          "description": "Source of brain nutrient data",
          "enum": ["usda_provided", "openfoodfacts", "literature_derived", "ai_generated", "expert_estimated"]
        },
        "impacts_source": {
          "type": "string",
          "description": "Source of mental health impact data",
          "enum": ["direct_studies", "literature_review", "mechanism_inference", "ai_generated"]
        },
        "source_priority": {
          "type": "object",
          "description": "Which source was prioritized for different data sections",
          "properties": {
            "standard_nutrients": {
              "type": "string",
              "enum": ["usda", "openfoodfacts", "literature", "ai_generated"]
            },
            "brain_nutrients": {
              "type": "string",
              "enum": ["usda", "openfoodfacts", "literature", "ai_generated"]
            },
            "bioactive_compounds": {
              "type": "string",
              "enum": ["usda", "openfoodfacts", "literature", "ai_generated"]
            }
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "description": "Metadata about this food entry",
      "properties": {
        "version": {
          "type": "string",
          "description": "Schema version"
        },
        "created": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "last_updated": {
          "type": "string",
          "format": "date-time",
          "description": "Last update timestamp"
        },
        "source_urls": {
          "type": "array",
          "description": "URLs to data sources",
          "items": {
            "type": "string"
          }
        },
        "source_ids": {
          "type": "object",
          "description": "IDs in original databases",
          "properties": {
            "usda_fdc_id": {
              "type": "string"
            },
            "openfoodfacts_id": {
              "type": "string"
            }
          }
        },
        "image_url": {
          "type": "string",
          "description": "URL to image of the food"
        },
        "tags": {
          "type": "array",
          "description": "Descriptive tags",
          "items": {
            "type": "string"
          }
        }
      }
    }
  }
}